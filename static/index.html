<!DOCTYPE html>
<html>

    <head>
        <title>
            Fridge Magnet Poetry
        </title>
    </head>

    <script src="http://js.staging.pusher.com/3.0.0-pre/pusher.js"></script>

    <script src="/static/js/lib/processing.js"></script>
    <script src="/static/js/lib/reqwest.min.js"></script>
    <script src="/static/js/lib/ready.js"></script>
    <script src="/static/js/lib/ki.min.js"></script>

    <script src="/static/js/form.js"></script>
    <script src="/static/js/word.js"></script>
    <script src="/static/js/app.js"></script>
    <script>
        domready(function () {

            var canvas,
                processing,
                pushercfg,
                pusher,
                channel,
                urls;

            urls = {
                createword: '/word/'
            };

            pushercfg = {
                app: '93491',
                key: '4a4d7ef213beae63ed74',
                wsHost: 'ws-megabus.pusher.com',
                httpHost: 'sockjs-megabus.pusher.com'
            };


            formBehaviour(urls);

            canvas = document.getElementById('sketch');
            processing = new Processing(canvas, app.processing);
            app.createWord('orange');
            app.createWord('foobar');

            pusher = new Pusher(pushercfg.key, pushercfg);
            channel = pusher.subscribe('fridge');
            channel.bind('new-word', function (data) {
                app.createWord(data.word);
            });

        })
    </script>

    <body>

        <h1>Fridge Magnet Poetry</h1>
        <canvas id="sketch" ></canvas>
        <form onSubmit="return false" >
            New Word: <input id="newWord" type="text" name="word"><br>
            <input id="createWord" type="submit" value="Create">
        </form>

    </body>

</html>
